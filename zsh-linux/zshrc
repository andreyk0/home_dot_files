# Skip these inside of nix shell
if [ -z "$IN_NIX_SHELL" ] ; then
  . /etc/environment

  if [ -e $HOME/.nix-profile/etc/profile.d/nix.sh ] ; then
  . $HOME/.nix-profile/etc/profile.d/nix.sh
  fi

  if [ -x /sbin/direnv ] ; then
    eval "$(direnv hook zsh)"
  fi
fi

. $HOME/.dotfiles/zsh-common/zshrc

if type kubectl > /dev/null ; then
  source <(kubectl completion zsh)
fi

if [ -e $HOME/.zshenvlocal ] ; then
. $HOME/.zshenvlocal
fi

E() { emacs "$@" & disown }
e() { emacsclient -nq "$@" }

# 1Pass
op-signin() { eval $(op signin $1) }


# enable color support of ls and also add handy aliases
if [ -x /usr/bin/dircolors ]; then

  export CLICOLOR=1
  export LSCOLORS=dxfxcxdxbxegedabagacad

  test -r ~/.dircolors && eval "$(/usr/bin/dircolors -b ~/.dircolors)" || eval "$(/usr/bin/dircolors -b)"
fi

alias ls='ls --color=auto'
alias ll='ls -lF'
alias la='ls -A'

alias st='git status'

alias trm='trash-put'
alias open='xdg-open'

# Launch GPG agent
#gpgconf --launch gpg-agent

# GPG/SSH env
GPG_TTY=$(/usr/bin/tty)
SSH_AUTH_SOCK="/run/user/$(id -u)/gnupg/S.gpg-agent.ssh"
export GPG_TTY SSH_AUTH_SOCK
